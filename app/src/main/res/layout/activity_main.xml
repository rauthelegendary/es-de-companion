<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/rootLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000">

    <!-- Video View (behind images, z-order lowest) -->
    <androidx.media3.ui.PlayerView
        android:id="@+id/videoView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone"
        app:use_controller="false"
        app:surface_type="texture_view" />

    <ImageView
        android:id="@+id/gameImageView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="Game artwork"
        android:scaleType="centerCrop" />

    <View
        android:id="@+id/dimmingOverlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#33000000" />

    <ImageView
        android:id="@+id/marqueeImageView"
        android:layout_width="300dp"
        android:layout_height="400dp"
        android:layout_centerInParent="true"
        android:contentDescription="Game marquee"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:cropToPadding="false" />

    <!-- Black overlay that can be pulled down during game mode -->
    <View
        android:id="@+id/blackOverlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FF000000"
        android:visibility="gone"
        android:clickable="true"
        android:focusable="true" />

    <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:id="@+id/appDrawer"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#AA000000"
            android:orientation="vertical"
            android:clickable="true"
            android:focusable="true"
            app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior">

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="16dp">

                <ImageButton
                    android:id="@+id/drawerBackButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_alignParentStart="true"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_arrow_back"
                    android:contentDescription="Close App Drawer"
                    app:tint="#FFFFFF" />

                <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="48dp"
                    android:layout_toEndOf="@id/drawerBackButton"
                    android:layout_toStartOf="@id/androidSettingsButton"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp">

                    <EditText
                        android:id="@+id/appSearchBar"
                        android:layout_width="match_parent"
                        android:layout_height="48dp"
                        android:background="@drawable/search_bar_background"
                        android:hint="Search apps..."
                        android:textColorHint="#99FFFFFF"
                        android:textColor="#FFFFFF"
                        android:paddingStart="16dp"
                        android:paddingEnd="48dp"
                        android:singleLine="true"
                        android:imeOptions="actionSearch"
                        android:inputType="text" />

                    <ImageButton
                        android:id="@+id/searchClearButton"
                        android:layout_width="40dp"
                        android:layout_height="40dp"
                        android:layout_gravity="end|center_vertical"
                        android:layout_marginEnd="4dp"
                        android:background="?attr/selectableItemBackgroundBorderless"
                        android:src="@android:drawable/ic_menu_close_clear_cancel"
                        android:contentDescription="Clear Search"
                        app:tint="#FFFFFF"
                        android:visibility="gone" />

                </FrameLayout>

                <ImageButton
                    android:id="@+id/androidSettingsButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_toStartOf="@id/settingsButton"
                    android:layout_marginEnd="8dp"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_settings"
                    android:contentDescription="Android Settings"
                    app:tint="#FFFFFF" />

                <ImageButton
                    android:id="@+id/settingsButton"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_alignParentEnd="true"
                    android:background="?attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_menu"
                    android:contentDescription="App Settings"
                    app:tint="#FFFFFF" />

            </RelativeLayout>

            <androidx.recyclerview.widget.RecyclerView
                android:id="@+id/appRecyclerView"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:paddingStart="16dp"
                android:paddingEnd="16dp"
                android:paddingBottom="16dp" />

        </LinearLayout>

    </androidx.coordinatorlayout.widget.CoordinatorLayout>

</RelativeLayout>